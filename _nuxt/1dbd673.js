(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{750:function(e,t,r){var content=r(835);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(36).default)("89633ab4",content,!0,{sourceMap:!1})},831:function(e,t,r){e.exports=r.p+"img/4040329.86a7c6e.png"},832:function(e,t,r){e.exports=r.p+"img/4736559.9ebb807.png"},833:function(e,t,r){e.exports=r.p+"img/4187234.7dbce41.png"},834:function(e,t,r){"use strict";r(750)},835:function(e,t,r){var c=r(35)(!1);c.push([e.i,".two-factor-auth[data-v-df11a4fa]{max-width:25rem}.security-character[data-v-df11a4fa]{position:absolute;bottom:-.5rem}",""]),e.exports=c},971:function(e,t,r){"use strict";r.r(t);var c=r(3),n=(r(19),r(63),r(109)),o=r(57),l=r(41),d=(r(439),{data:function(){return{user:n.a.user,kyc:{},response:!1,active:!1,id:"",checkId:!1,isPassport:!1,image:"",dialog:!1}},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.switchLoad(!0);case 2:return t.next=4,e.getMyKyc();case 4:return t.next=6,l.a.switchLoad(!1);case 6:case"end":return t.stop()}}),t)})))()},methods:{openImage:function(image){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.image=image,e.dialog=!0;case 2:case"end":return t.stop()}}),t)})))()},getMyKyc:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getHttp("/api/account/kyc/?user=".concat(e.user.id));case 2:if(!((r=t.sent).length>0)){t.next=9;break}return e.kyc=r[r.length-1],e.id=e.kyc.card_id,t.next=8,e.checkIdData();case 8:e.response=!0;case 9:case"end":return t.stop()}}),t)})))()},storeKycCard:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var image,c,n,d,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!((image=t.$refs[e]).files.length>0)){r.next=25;break}return r.next=5,o.a.setWaterMark(image.files[0]);case 5:return c=r.sent,r.next=8,o.a.dataURLtoFile(c.src);case 8:return n=r.sent,(d=new FormData).append(e,n),r.next=13,o.a.putImageHttpAlert("/api/account/kyc/".concat(t.kyc.id,"/"),d);case 13:if(!(v=r.sent).id){r.next=19;break}return r.next=17,o.a.postHttp("/api/auth/v2/watermark/",{image:v[e]});case 17:r.sent,console.log("[dsdsd]",v.image_card);case 19:return r.next=21,l.a.switchLoad(!0);case 21:return r.next=23,t.getMyKyc();case 23:return r.next=25,l.a.switchLoad(!1);case 25:r.next=30;break;case 27:r.prev=27,r.t0=r.catch(0),t.$refs[e].value="";case 30:case"end":return r.stop()}}),r,null,[[0,27]])})))()},updateCardId:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.putHttpAlert("/api/account/kyc/".concat(e.kyc.id,"/"),{card_id:e.id});case 2:return t.sent,t.next=5,l.a.switchLoad(!0);case 5:return t.next=7,e.getMyKyc();case 7:return t.next=9,l.a.switchLoad(!1);case 9:case"end":return t.stop()}}),t)})))()},checkIdData:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,e.IsNumeric(r)){t.next=3;break}return t.abrupt("return",!1);case 3:if(0!=r.substring(0,1)){t.next=5;break}return t.abrupt("return",!1);case 5:if(13==r.length){t.next=9;break}return e.checkId=!1,console.log(!1),t.abrupt("return",!1);case 9:for(c=0,i=0;i<12;i++)c+=parseFloat(r.charAt(i))*(13-i);if((11-c%11)%10==parseFloat(r.charAt(12))){t.next=17;break}return e.checkId=!1,console.log(!1),t.abrupt("return",!1);case 17:return e.checkId=!0,console.log(!0),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t)})))()},IsNumeric:function(input){return/^-?(0|INF|(0[1-7][0-7]*)|(0x[0-9a-fA-F]+)|((0|[1-9][0-9]*|(?=[\.,]))([\.,][0-9]+)?([eE]-?\d+)?))$/.test(input)}}}),v=(r(834),r(75)),f=r(86),_=r.n(f),m=r(630),y=r(601),x=r(595),k=r(591),h=r(830),w=r(596),C=r(588),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,c=e._self._c||t;return e.response?c("v-card",{staticClass:"mt-5",attrs:{flat:""}},[c("div",{staticClass:"px-3  mb-5"},[c("v-card-text",{},[e.kyc.user_verified?c("v-alert",{attrs:{type:"success",value:!0}},[e._v("\r\n                คุณได้ทำการยืนยันตัวตนเรียบร้อยแล้ว\r\n            ")]):e._e(),e._v(" "),0==e.kyc.user_verified?c("v-alert",{attrs:{type:"warning",value:!0}},[e._v("\r\n                คุณยังไม่ได้ทำการยืนยันตัวตน โปรดตรวจสอบข้อมูล หากคุณกรอกข้อมูลแล้ว รอระบบตรวจสอบ 1-2 วันทำการ\r\n            ")]):e._e(),e._v(" "),1==e.kyc.user_verified_image_card_error&&0==e.kyc.user_verified?c("v-alert",{attrs:{type:"error",value:!0}},[e._v("\r\n                ภาพถ่ายสำเนาบัตรประจำตัวประชาชน มีปัญหา\r\n            ")]):e._e(),e._v(" "),1==e.kyc.user_verified_image_selfie_error&&0==e.kyc.user_verified?c("v-alert",{attrs:{type:"error",value:!0}},[e._v("\r\n                ภาพถ่าย selfie กับบัตรประจำตัวประชาชน มีปัญหา\r\n            ")]):e._e(),e._v(" "),1==e.kyc.user_verified_name_error&&0==e.kyc.user_verified?c("v-alert",{attrs:{type:"error",value:!0}},[e._v("\r\n                ชื่อ-สกุล ไม่ตรงกับบัตรประจำตัวประชาชน\r\n            ")]):e._e(),e._v(" "),1==e.kyc.user_verified_id_error&&0==e.kyc.user_verified?c("v-alert",{attrs:{type:"error",value:!0}},[e._v("\r\n                เลขบัตรประชาชน ไม่ตรงกับบัตรประจำตัวประชาชน\r\n            ")]):e._e(),e._v(" "),0==e.kyc.phone_verified&&0==e.kyc.user_verified?c("v-alert",{attrs:{type:"error",value:!0}},[e._v("\r\n                ยังไม่ได้ยืนยันตัวตนผ่าน มือถือ (OTP)\r\n            ")]):e._e(),e._v(" "),c("div",{staticClass:"py-10 bg-white"},[c("div",{staticClass:"container m-auto px-6 text-gray-600 md:px-12 xl:px-6"},[c("div",{staticClass:"space-y-6 md:space-y-0 md:flex md:gap-6 lg:items-center lg:gap-12 justify-center items-center"},[c("div",{staticClass:"md:5/12 lg:w-5/12"},[c("img",{staticClass:"w-56",attrs:{src:r(831),alt:""}})]),e._v(" "),c("div",{staticClass:"md:7/12 lg:w-6/12"},[c("h2",{staticClass:"text-xl text-gray-900 font-bold md:text-xl"},[e._v("1."+e._s(e.$t("kyc").verify))]),e._v(" "),c("p",{staticClass:"mt-6 text-gray-600"},[e._v(e._s(e.$t("kyc").bodyverify))]),e._v(" "),c("AccountKYC-IDCard",{attrs:{kyc:e.kyc},on:{reload:e.getMyKyc}})],1)])])]),e._v(" "),c("div",{staticClass:"py-10 bg-white"},[c("div",{staticClass:"container m-auto px-6 text-gray-600 md:px-12 xl:px-6"},[c("div",{staticClass:"space-y-6 md:space-y-0 md:flex md:gap-6 lg:items-center lg:gap-12 justify-center items-center"},[c("div",{staticClass:"md:5/12 lg:w-5/12"},[c("img",{staticClass:"w-56",attrs:{src:r(832),alt:""}})]),e._v(" "),c("div",{staticClass:"md:7/12 lg:w-6/12"},[c("h2",{staticClass:"text-xl text-gray-900 font-bold md:text-xl"},[e._v("2."+e._s(e.$t("kyc").updatecard))]),e._v(" "),c("p",{staticClass:"mt-6 text-gray-600"},[e._v(e._s(e.$t("kyc").bodycard))]),e._v(" "),e.kyc.image_card?c("v-btn",{attrs:{text:"",color:"success"},on:{click:function(t){return e.openImage(e.kyc.image_card)}}},[c("v-icon",{staticClass:" text-green-500 mr-2"},[e._v("mdi-eye")]),c("span",{staticClass:"capitalize text-green-500 font-semibold text-base"},[e._v(e._s(e.$t("kyc").viewimg))])],1):e._e(),e._v(" "),e.kyc.user_verified?e._e():c("input",{ref:"image_card",staticClass:"text-sm cursor-pointer w-36  hidden",attrs:{type:"file",accept:".jpeg,.png,.jpg,GIF"},on:{input:function(t){return e.storeKycCard("image_card")}}}),e._v(" "),c("div",{staticClass:"flex justify-center mt-4"},[c("v-spacer",{staticClass:"hidden md:block"}),e._v(" "),e.kyc.user_verified?e._e():c("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.$refs.image_card.click()}}},[e._v(e._s(e.$t("kyc").uploadimg))])],1)],1)])])]),e._v(" "),c("div",{staticClass:"py-10 bg-white"},[c("div",{staticClass:"container m-auto px-6 text-gray-600 md:px-12 xl:px-6"},[c("div",{staticClass:"space-y-6 md:space-y-0 md:flex md:gap-6 lg:items-center lg:gap-12 justify-center items-center"},[c("div",{staticClass:"md:5/12 lg:w-5/12"},[c("img",{staticClass:"w-56",attrs:{src:r(833),alt:""}})]),e._v(" "),c("div",{staticClass:"md:7/12 lg:w-6/12"},[c("h2",{staticClass:"text-xl text-gray-900 font-bold md:text-xl"},[e._v("3."+e._s(e.$t("kyc").uploadselfie))]),e._v(" "),c("p",{staticClass:"mt-6 text-gray-600"},[e._v(e._s(e.$t("kyc").bodyselfie))]),e._v(" "),e.kyc.image_selfie?c("v-btn",{attrs:{text:"",color:"success"},on:{click:function(t){return e.openImage(e.kyc.image_selfie)}}},[c("v-icon",{staticClass:" text-green-500 mr-2"},[e._v("mdi-eye")]),c("span",{staticClass:"capitalize text-green-500 font-semibold text-base"},[e._v(e._s(e.$t("kyc").viewimg))])],1):e._e(),e._v(" "),e.kyc.user_verified?e._e():c("input",{ref:"image_selfie",staticClass:"text-sm cursor-pointer w-36  hidden",attrs:{type:"file",accept:".jpeg,.png,.jpg,GIF"},on:{input:function(t){return e.storeKycCard("image_selfie")}}}),e._v(" "),c("div",{staticClass:"flex justify-center mt-4"},[c("v-spacer",{staticClass:"hidden md:block"}),e._v(" "),e.kyc.user_verified?e._e():c("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.$refs.image_selfie.click()}}},[e._v(e._s(e.$t("kyc").uploadimg))])],1)],1)])])])],1)],1),e._v(" "),c("v-dialog",{attrs:{scrollable:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[c("v-card",[c("img",{attrs:{src:e.$url+e.image,alt:""}})])],1)],1):e._e()}),[],!1,null,"df11a4fa",null);t.default=component.exports;_()(component,{VAlert:m.a,VBtn:y.a,VCard:x.a,VCardText:k.c,VDialog:h.a,VIcon:w.a,VSpacer:C.a})}}]);