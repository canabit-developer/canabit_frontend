(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{903:function(e,t,r){"use strict";r.r(t);var n=r(4),o=(r(28),r(66),r(65),r(31)),c=r(35),l=r(97),d=(r(123),{layout:"root",data:function(){return{isPasswordVisible:!1,form:{login:"",password:""},error:{},errorRegister:{},userCheckError:!1,rules:{required:function(e){return!!e||"Required."}}}},created:function(){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.checkUser();case 2:case"end":return e.stop()}}),e)})))()},methods:{login:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],r.next=3,o.a.postHttp("/api/auth/v2/check/",t.form);case 3:if(!(c=r.sent).username||0==c.is_active){r.next=24;break}return t.form.username=c.username,r.next=8,l.a.login(t.form);case 8:if(!(d=r.sent).key){r.next=20;break}return r.next=12,l.a.storeToken(d.key);case 12:return r.next=14,l.a.storeTokenToStorage(d.key);case 14:return r.next=16,t.$router.replace("/");case 16:return t.userCheckError=!1,r.abrupt("return",!0);case 20:return n&&(t.error=d),r.abrupt("return",!1);case 22:r.next=31;break;case 24:if(0!=c.is_active){r.next=29;break}return r.next=27,t.$router.replace("/auth/verify");case 27:r.next=31;break;case 29:t.userCheckError=!0,console.log(t.userCheckError);case 31:case"end":return r.stop()}}),r)})))()},callback:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.switchLoad(!0);case 2:return t.form=e.login,r.next=5,t.login(!1);case 5:if(n=r.sent){r.next=27;break}return r.next=9,l.a.register(e.register);case 9:if(!(o=r.sent).id){r.next=22;break}return r.next=13,c.a.switchLoad(!1);case 13:return r.next=15,t.generateKyc(o.id);case 15:return r.next=17,t.generatePoint(o.id);case 17:return r.next=19,t.$router.replace("/auth/verify");case 19:console.log(o),r.next=25;break;case 22:return t.errorRegister=o,r.next=25,c.a.switchLoad(!1);case 25:r.next=28;break;case 27:t.error=n;case 28:return r.next=30,c.a.switchLoad(!1);case 30:console.log(e);case 31:case"end":return r.stop()}}),r)})))()},generateKyc:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.postHttp("/api/account/kyc/",{user:e});case 2:r.sent.id?t.$vs.notification({color:"success",title:"สร้างข้อมูล KYC สำเร็จแล้ว"}):t.$vs.notification({color:"danger",title:"สร้างข้อมูล KYC ไม่สำเร็จ"});case 4:case"end":return r.stop()}}),r)})))()},generatePoint:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,form;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.getHttp("/api/account/tier/");case 2:return n=r.sent,form={total:0,current:0,tier:n[0].id,user:e},r.next=6,o.a.postHttp("/api/account/userpoint/",form);case 6:r.sent.id?t.$vs.notification({color:"success",title:"สร้างข้อมูล Point สำเร็จแล้ว"}):t.$vs.notification({color:"danger",title:"สร้างข้อมูล Point ไม่สำเร็จ"});case 8:case"end":return r.stop()}}),r)})))()}}}),v=d,f=r(56),m=r(73),x=r.n(m),_=r(678),h=r(580),w=r(578),k=r(655),y=r(652),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("section",{staticClass:"min-h-screen flex items-stretch  "},[e._m(0),e._v(" "),r("div",{staticClass:"lg:w-1/2 w-full flex items-center justify-center   md:px-16 px-0 z-0"},[r("div",{staticClass:"w-full py-6 z-20"},[r("form",{staticClass:"sm:w-2/3 w-full px-4 lg:px-0 mx-auto",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h1",{staticClass:"font-bold text-4xl"},[e._v("Cash Back")]),r("br"),r("br"),e._v(" "),r("h1",{staticClass:" font-bold text-2xl"},[r("v-icon",{staticClass:"mr-2"},[e._v("em em-raised_hand_with_fingers_splayed")]),e._v("\n                            Welcome back!\n                        ")],1),e._v(" "),r("p",[e._v("\n                            Let's build someting great\n                        ")]),r("br"),e._v(" "),r("div",[e.userCheckError?r("div",[r("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error",value:!0}},[e._v("\n                                User not found Please fill out the correct information.\n                            ")])],1):e._e(),e._v(" "),e.error.detail?r("div",[r("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error",value:!0}},[e._v("\n                                "+e._s(e.error.detail)+"\n                            ")])],1):e._e(),e._v(" "),e.errorRegister.email?r("div",e._l(e.errorRegister.email,(function(t,i){return r("v-alert",{key:i,attrs:{dense:"",outlined:"",text:"",type:"error",value:!0}},[e._v("\n                                "+e._s(t)+"\n                            ")])})),1):e._e(),e._v(" "),e.errorRegister.password?r("div",e._l(e.errorRegister.password,(function(t,i){return r("v-alert",{key:i,attrs:{dense:"",outlined:"",text:"",type:"error",value:!0}},[e._v("\n                                "+e._s(t)+"\n                            ")])})),1):e._e(),e._v(" "),e.errorRegister.phone_number?r("div",e._l(e.errorRegister.phone_number,(function(t,i){return r("v-alert",{key:i,attrs:{dense:"",outlined:"",text:"",type:"error",value:!0}},[e._v("\n                                "+e._s(t)+"\n                            ")])})),1):e._e()]),e._v(" "),r("v-text-field",{staticClass:"mb-3",attrs:{"prepend-inner-icon":"em em-bust_in_silhouette",rules:[e.rules.required],required:"",color:"primary",outlined:"",label:"E-mail or Phone Number",placeholder:"E-mail,Phone Number","hide-details":""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e._v(" "),r("br"),e._v(" "),r("v-text-field",{attrs:{"prepend-inner-icon":"em em-lock",rules:[e.rules.required],required:"",color:"primary",outlined:"",type:e.isPasswordVisible?"text":"password",label:"Password",placeholder:"············","append-icon":e.isPasswordVisible?"mdi-eye-off-outline":"mdi-eye-outline","hide-details":""},on:{"click:append":function(t){e.isPasswordVisible=!e.isPasswordVisible}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),r("v-btn",{staticClass:"bg-primary-g mt-6",attrs:{type:"submit","x-large":"",dark:"",block:""}},[e._v("\n                            Login\n                        ")]),e._v(" "),r("div",{staticClass:"d-flex align-center justify-space-between flex-wrap mt-4"},[r("p",{staticClass:"mt-1"},[e._v("Don’t have an account?\n                                "),r("router-link",{attrs:{to:{path:"/auth/register"}}},[e._v("\n                                    Get started\n                                ")])],1),e._v(" "),r("v-spacer"),e._v(" "),r("p",{staticClass:"mt-1"},[r("router-link",{attrs:{to:{path:"/auth/forgot"}}},[e._v("\n                                    Forgot Password?\n                                ")])],1)],1)],1),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("div",{staticClass:"sm:w-2/3 w-full px-4 lg:px-0 mx-auto"},[r("center",[r("p",[e._v("Or Use Social accounts")])]),e._v(" "),r("Auth-SocialLogin",{on:{callback:e.callback}}),e._v(" "),r("br")],1)])])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lg:flex w-1/2 hidden bg-green-400 bg-no-repeat bg-cover relative items-center"},[r("div",{staticClass:"w-full px-24 z-10 text-white"},[r("h1",{staticClass:"text-5xl font-bold text-left tracking-wide"},[e._v("CASH BACK")]),r("br"),r("br"),e._v(" "),r("h1",{staticClass:"text-3xl font-bold text-left tracking-wide"},[e._v("Let’s Trade something amazing today.")]),e._v(" "),r("p",{staticClass:"text-2xl my-4"},[e._v("Maybe some text here will help me see it better. Oh God. Oke, let’s do it then. ")])])])}],!1,null,null,null);t.default=component.exports;x()(component,{VAlert:_.a,VBtn:h.a,VIcon:w.a,VSpacer:k.a,VTextField:y.a})}}]);